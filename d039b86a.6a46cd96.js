(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return s}));var r=n(3),a=n(7),l=(n(0),n(142)),o={id:"using-bundlers",title:"Using Bundlers",sidebar_label:"Bundlers"},c={unversionedId:"frameworks/using-bundlers",id:"frameworks/using-bundlers",isDocsHomePage:!1,title:"Using Bundlers",description:"If you don't know why you should use bundlers, read up",source:"@site/docs/frameworks/using-bundlers.md",slug:"/frameworks/using-bundlers",permalink:"/docs/frameworks/using-bundlers",editUrl:"https://github.com/nodecg/docs/edit/master/docs/frameworks/using-bundlers.md",version:"current",lastUpdatedBy:"Ewan Lyon",lastUpdatedAt:1610153791,sidebar_label:"Bundlers",sidebar:"mainSidebar",previous:{title:"Error Reporting with Sentry.io",permalink:"/docs/sentry"},next:{title:"TypeScript",permalink:"/docs/frameworks/typescript"}},i=[{value:"Directory Structure",id:"directory-structure",children:[]},{value:"Setup",id:"setup",children:[{value:"Add parcel to your bundle",id:"add-parcel-to-your-bundle",children:[]},{value:"Make an entrypoint",id:"make-an-entrypoint",children:[]},{value:"Run the command",id:"run-the-command",children:[]},{value:"Recommended Configuration",id:"recommended-configuration",children:[]},{value:"Going further",id:"going-further",children:[]}]}],b={rightToc:i};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"If you don't know why you should use bundlers, read up\n",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://webpack.js.org/concepts/why-webpack/"}),"Why webpack"),"."),Object(l.b)("p",null,"There are currently three JavaScript bundlers."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/webpack/webpack"}),"webpack"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"By far the most used bundler with a lot of community made extensions"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/rollup/rollup"}),"rollup"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Primarily used by libraries like React, Vue"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/parcel-bundler/parcel"}),"parcel"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"New bundler famous for zero-config, and super fast building process")))),Object(l.b)("p",null,"These bundlers allows you to"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"write modular, organised source code"),Object(l.b)("li",{parentName:"ul"},"treat CSS, images, or any sort of files like JavaScript module"),Object(l.b)("li",{parentName:"ul"},"use npm packages for front-end (dashboard/graphics)"),Object(l.b)("li",{parentName:"ul"},"use JSX/TSX, Vue single file component"),Object(l.b)("li",{parentName:"ul"},"write in other languages like TypeScript"),Object(l.b)("li",{parentName:"ul"},"and many more")),Object(l.b)("p",null,"This tutorial goes through the setup using parcel."),Object(l.b)("h2",{id:"directory-structure"},"Directory Structure"),Object(l.b)("p",null,"Basically you will have parcel to output the whole ",Object(l.b)("inlineCode",{parentName:"p"},"dashboard")," and ",Object(l.b)("inlineCode",{parentName:"p"},"graphics"),"\ndirectory. Your project would look like this"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-folders"}),"foo-layouts\n|- extension\n|- schemas\n|- src\n|- package.json\n")),Object(l.b)("p",null,"When you run parcel, it will make ",Object(l.b)("inlineCode",{parentName:"p"},"dashboard")," and ",Object(l.b)("inlineCode",{parentName:"p"},"graphics")," directory and\noutput bundle result into them."),Object(l.b)("p",null,"(After running parcel)"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-folders"}),"foo-layouts\n|- extension\n|- schemas\n|- src\n|- package.json\n|- dashboard (built)\n  |- index.html\n  |- styles.8jx17sx.css\n  |- main.7x2hdjs.js\n|- graphics (built)\n  |- ds1.html\n  |- sd1.html\n  |- styles.03nsh2s.css\n  |- ds1.rssiahs.js\n  |- sd1.4jc71nx.js\n  |- background.d8frsis.png\n")),Object(l.b)("p",null,"The random string for each generated files are automatically generated to\nrefresh cache when the files change."),Object(l.b)("h2",{id:"setup"},"Setup"),Object(l.b)("p",null,"As I said, parcel is (literally) zero-configuration required. It even installs\nmissing packages for you if there is any."),Object(l.b)("h3",{id:"add-parcel-to-your-bundle"},"Add parcel to your bundle"),Object(l.b)("h4",{id:"locally"},"Locally"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"npm install --save-dev parcel-bundler\n# or\nyarn add -D parcel-bundler\n")),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"parcel")," command will be available locally. You can run it either adding\nnpm scripts, or ",Object(l.b)("inlineCode",{parentName:"p"},"npx parcel"),"/",Object(l.b)("inlineCode",{parentName:"p"},"yarn parcel"),"."),Object(l.b)("h4",{id:"globally"},"Globally"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"npm install -g parcel-bundler\n# or\nyarn global add parcel-bundler\n")),Object(l.b)("p",null,"With this, ",Object(l.b)("inlineCode",{parentName:"p"},"parcel")," command should be available globally. Just run ",Object(l.b)("inlineCode",{parentName:"p"},"parcel")," to\nrun the bundler."),Object(l.b)("h3",{id:"make-an-entrypoint"},"Make an entrypoint"),Object(l.b)("p",null,"When building front-end, HTML file is usually used as entrypoint. You can just\nuse your HTML file with your scripts and stylesheets imported."),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <link rel="stylesheet" href="./styles.css">\n  </head>\n\n  <body>\n    <div id="tech"></div>\n    \x3c!-- Or a lot of pre-defined elements --\x3e\n    <script src="./index.js"><\/script>\n  </body>\n</html>\n')),Object(l.b)("p",null,"The entrypoint HTML file will also be compiled in the bundler. So you can have many\nkind of files in the ",Object(l.b)("inlineCode",{parentName:"p"},"script")," tag. Parcel will automatically detect file format\nand use an appropriate library/compiler to bundle the file."),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<script src="./main.coffee"><\/script>\n')),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<script src="./app.tsx"><\/script>\n')),Object(l.b)("p",null,"Or the entrypoint doesn't even have to be an HTML file. For example, you can use\n",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://pugjs.org/api/getting-started.html"}),"Pug")," to have common parts of HTML file into one file."),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-pug"}),'doctype html\nhtml\n  head\n    title graphics-ds\n    include lib/common.pug\n  body\n    div(id="ds")\n    script(src="./views/ds.ts")\n')),Object(l.b)("h3",{id:"run-the-command"},"Run the command"),Object(l.b)("p",null,"For development, with file change detection and hot-reloading:"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"parcel watch src/dashboard/index.html --out-dir dashboard --public-url ./\n")),Object(l.b)("p",null,"For production build, with optimized output:"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"parcel build src/dashboard/index.html --out-dir dashboard --public-url ./\n")),Object(l.b)("p",null,"(Replace ",Object(l.b)("inlineCode",{parentName:"p"},"src/dashboard/index.html")," with your entrypoint files.)"),Object(l.b)("p",null,"You can use a glob pattern to use multiple entrypoints, if you have multiple pages\nto compile"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"parcel build src/dashboard/*.html --out-dir dashboard --public-url ./\n")),Object(l.b)("p",null,"Details described in ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://parceljs.org/cli.html"}),"the reference"),"."),Object(l.b)("h3",{id:"recommended-configuration"},"Recommended Configuration"),Object(l.b)("p",null,"Even though it already works for most cases (!), a bit of configuration might be\nrecommended/required."),Object(l.b)("h4",{id:"browserslist"},"browserslist"),Object(l.b)("p",null,"Parcel uses ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://babeljs.io/"}),"babel")," out of box, and the default supported\nbrowsers are ",Object(l.b)("inlineCode",{parentName:"p"},">0.25%")," which includes old browsers like IE."),Object(l.b)("p",null,"Considering how NodeCG is used, it's the best to target only modern browsers or\njust Chrome. To do so, add ",Object(l.b)("inlineCode",{parentName:"p"},"browserslist")," property to ",Object(l.b)("inlineCode",{parentName:"p"},"package.json"),"."),Object(l.b)("p",null,"For example,"),Object(l.b)("pre",null,Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-json"}),'{\n  // ...\n  "browserslist": "last 2 chrome versions",\n  "nodecg": //...\n}\n')),Object(l.b)("p",null,"Refer to ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/browserslist/browserslist#full-list"}),"this page")," for\ndetailed ",Object(l.b)("inlineCode",{parentName:"p"},"browserslist")," syntax."),Object(l.b)("h3",{id:"going-further"},"Going further"),Object(l.b)("p",null,"Due to the huge amount of features parcel offers out of box, at this point you\nalready have a lot more options for your front-end development. For example:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"React development with JSX/TSX"),Object(l.b)("li",{parentName:"ul"},"Vue single file component"),Object(l.b)("li",{parentName:"ul"},"TypeScript or other alternative languages")),Object(l.b)("p",null,"Also, if your project becomes too advanced for parcel to handle, you can switch\nto webpack. It produces a bit more optimized code, and has a lot more features\nsupported."))}s.isMDXComponent=!0},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var b=a.a.createContext({}),s=function(e){var t=a.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=s(e.components);return a.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,b=i(e,["components","mdxType","originalType","parentName"]),u=s(n),d=r,m=u["".concat(o,".").concat(d)]||u[d]||p[d]||l;return n?a.a.createElement(m,c(c({ref:t},b),{},{components:n})):a.a.createElement(m,c({ref:t},b))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var b=2;b<l;b++)o[b]=n[b];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);